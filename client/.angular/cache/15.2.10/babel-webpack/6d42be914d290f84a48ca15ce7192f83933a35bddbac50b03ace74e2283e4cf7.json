{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/service/media.service\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = [\"video\"];\nfunction ParticipantComponent__svg_svg_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 5)(1, \"style\");\n    i0.ɵɵtext(2, \"svg{fill:#ffffff}\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"path\", 6);\n    i0.ɵɵelementEnd();\n  }\n}\nexport class ParticipantComponent {\n  _handleMediaInput(message) {\n    let blobUrl = URL.createObjectURL(message.data);\n    this.videoEl.nativeElement.src = blobUrl;\n    URL.revokeObjectURL(blobUrl);\n  }\n  constructor(_mediaService) {\n    this._mediaService = _mediaService;\n    this.isMicroActive = false;\n    //this._mediaService.listenMediaData(this._handleMediaInput.bind(this));\n  }\n  static #_ = this.ɵfac = function ParticipantComponent_Factory(t) {\n    return new (t || ParticipantComponent)(i0.ɵɵdirectiveInject(i1.MediaService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ParticipantComponent,\n    selectors: [[\"app-participant\"]],\n    viewQuery: function ParticipantComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.videoEl = _t.first);\n      }\n    },\n    inputs: {\n      participant: \"participant\"\n    },\n    decls: 5,\n    vars: 1,\n    consts: [[1, \"video-container\"], [\"autoplay\", \"true\"], [\"video\", \"\"], [1, \"micro-icon\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"height\", \"1em\", \"viewBox\", \"0 0 640 512\", 4, \"ngIf\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"height\", \"1em\", \"viewBox\", \"0 0 640 512\"], [\"d\", \"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L472.1 344.7c15.2-26 23.9-56.3 23.9-88.7V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 21.2-5.1 41.1-14.2 58.7L416 300.8V96c0-53-43-96-96-96s-96 43-96 96v54.3L38.8 5.1zM344 430.4c20.4-2.8 39.7-9.1 57.3-18.2l-43.1-33.9C346.1 382 333.3 384 320 384c-70.7 0-128-57.3-128-128v-8.7L144.7 210c-.5 1.9-.7 3.9-.7 6v40c0 89.1 66.2 162.7 152 174.4V464H248c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H344V430.4z\"]],\n    template: function ParticipantComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"video\", 1, 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵtemplate(4, ParticipantComponent__svg_svg_4_Template, 4, 0, \"svg\", 4);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isMicroActive);\n      }\n    },\n    dependencies: [i2.NgIf],\n    styles: [\".video-container[_ngcontent-%COMP%] {\\n  position: relative;\\n  height: 100%;\\n}\\n.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%] {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n  z-index: 5;\\n}\\n.video-container[_ngcontent-%COMP%]   .micro-icon[_ngcontent-%COMP%] {\\n  position: absolute;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFydGljaXBhbnQvcGFydGljaXBhbnQuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi8uLi8lRDAlOUIlRDAlQjAlRDAlQjElRDAlQkElRDAlQjgvVmlkZW9DaGF0L2NsaWVudC9zcmMvYXBwL3BhcnRpY2lwYW50L3BhcnRpY2lwYW50LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7RUFDQSxZQUFBO0FDQ0o7QURDSTtFQUNJLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtFQUNBLFVBQUE7QUNDUjtBREVJO0VBQ0ksa0JBQUE7QUNBUiIsInNvdXJjZXNDb250ZW50IjpbIi52aWRlby1jb250YWluZXIge1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG5cclxuICAgIHZpZGVvIHtcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgIG9iamVjdC1maXQ6IGNvdmVyO1xyXG4gICAgICAgIHotaW5kZXg6IDU7XHJcbiAgICB9XHJcblxyXG4gICAgLm1pY3JvLWljb24ge1xyXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIH1cclxufSIsIi52aWRlby1jb250YWluZXIge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGhlaWdodDogMTAwJTtcbn1cbi52aWRlby1jb250YWluZXIgdmlkZW8ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIG9iamVjdC1maXQ6IGNvdmVyO1xuICB6LWluZGV4OiA1O1xufVxuLnZpZGVvLWNvbnRhaW5lciAubWljcm8taWNvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"mappings":";;;;;;IAGQA,mBAAkG;IAAlGA,8BAAkG;IAAOA,iCAAiB;IAAAA,iBAAQ;IAAAA,0BAAuiB;IAAAA,iBAAM;;;ACMvrB,OAAM,MAAOC,oBAAoB;EAOvBC,iBAAiB,CAACC,OAA0B;IAClD,IAAIC,OAAO,GAAGC,GAAG,CAACC,eAAe,CAACH,OAAO,CAACI,IAAI,CAAC;IAC/C,IAAI,CAACC,OAAO,CAACC,aAAa,CAACC,GAAG,GAAGN,OAAO;IACxCC,GAAG,CAACM,eAAe,CAACP,OAAO,CAAC;EAC9B;EAEAQ,YAA6BC,aAA2B;IAA3B,kBAAa,GAAbA,aAAa;IARnC,kBAAa,GAAG,KAAK;IAS1B;EACF;EAAC;qBAfUZ,oBAAoB;EAAA;EAAA;UAApBA,oBAAoB;IAAAa;IAAAC;MAAA;;;;;;;;;;;;;;;;QDTjCf,8BAA6B;QACzBA,8BAAsC;QACtCA,8BAAwB;QACpBA,0EAA+qB;QACnrBA,iBAAM;;;QADIA,eAAoB;QAApBA,yCAAoB","names":["i0","ParticipantComponent","_handleMediaInput","message","blobUrl","URL","createObjectURL","data","videoEl","nativeElement","src","revokeObjectURL","constructor","_mediaService","selectors","viewQuery"],"sourceRoot":"","sources":["D:\\Лабки\\VideoChat\\client\\src\\app\\participant\\participant.component.html","D:\\Лабки\\VideoChat\\client\\src\\app\\participant\\participant.component.ts"],"sourcesContent":["<div class=\"video-container\">\n    <video autoplay=\"true\" #video></video>\n    <div class=\"micro-icon\">\n        <svg *ngIf=\"!isMicroActive\" xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 640 512\"><style>svg{fill:#ffffff}</style><path d=\"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L472.1 344.7c15.2-26 23.9-56.3 23.9-88.7V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 21.2-5.1 41.1-14.2 58.7L416 300.8V96c0-53-43-96-96-96s-96 43-96 96v54.3L38.8 5.1zM344 430.4c20.4-2.8 39.7-9.1 57.3-18.2l-43.1-33.9C346.1 382 333.3 384 320 384c-70.7 0-128-57.3-128-128v-8.7L144.7 210c-.5 1.9-.7 3.9-.7 6v40c0 89.1 66.2 162.7 152 174.4V464H248c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H344V430.4z\"/></svg>\n    </div>\n</div>\n","import { Component, ElementRef, Input, ViewChild, OnChanges } from '@angular/core';\nimport { Participant } from 'src/model/participant';\nimport { MediaService } from 'src/service/media.service';\n\n@Component({\n  selector: 'app-participant',\n  templateUrl: './participant.component.html',\n  styleUrls: ['./participant.component.scss']\n})\nexport class ParticipantComponent {\n  @ViewChild(\"video\") public videoEl! : ElementRef;\n  public mediaRecorder?: MediaRecorder;\n  @Input() public participant!: Participant;\n\n  public isMicroActive = false;\n\n  private _handleMediaInput(message: MessageEvent<any>) {\n    let blobUrl = URL.createObjectURL(message.data);\n    this.videoEl.nativeElement.src = blobUrl;\n    URL.revokeObjectURL(blobUrl);\n  }\n\n  constructor(private readonly _mediaService: MediaService) {\n    //this._mediaService.listenMediaData(this._handleMediaInput.bind(this));\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}