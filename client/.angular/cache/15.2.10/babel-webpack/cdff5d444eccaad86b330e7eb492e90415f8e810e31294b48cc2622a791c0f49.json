{"ast":null,"code":"import _asyncToGenerator from \"D:/\\u041B\\u0430\\u0431\\u043A\\u0438/VideoChat/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/service/media.service\";\nimport * as i2 from \"@angular/common\";\nfunction InputControlsComponent__svg_svg_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 12)(1, \"style\");\n    i0.ɵɵtext(2, \"svg{fill:#ffffff}\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"path\", 13);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InputControlsComponent__svg_svg_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 7)(1, \"style\");\n    i0.ɵɵtext(2, \"svg{fill:#ffffff}\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"path\", 14);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InputControlsComponent__svg_svg_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 15)(1, \"style\");\n    i0.ɵɵtext(2, \"svg{fill:#ffffff}\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"path\", 16);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InputControlsComponent__svg_svg_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 7)(1, \"style\");\n    i0.ɵɵtext(2, \"svg{fill:#ffffff}\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"path\", 17);\n    i0.ɵɵelementEnd();\n  }\n}\nexport class InputControlsComponent {\n  constructor(_mediaService) {\n    this._mediaService = _mediaService;\n    this.isMicroActive = false;\n    this.isVideoActive = false;\n    this.isSharingActive = false;\n  }\n  _onStopVideo() {\n    this._currentStream.removeTrack(this._currentStream.getTrackById(this._videoTrackId));\n  }\n  _onStopAudio() {\n    this._currentStream.getAudioTracks().forEach(track => track.stop());\n  }\n  onMicroBtnClick() {\n    this.isMicroActive = !this.isMicroActive;\n    if (this.isMicroActive) {}\n  }\n  onVideoBtnClick() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.isVideoActive = !_this.isVideoActive;\n      if (_this.isVideoActive && !_this._currentStream) {\n        _this._currentStream = yield _this._mediaService.getVideoStream();\n        _this.currentParticipant.videoEl.nativeElement.srcObject = _this._currentStream;\n      } else if (_this.isVideoActive && _this._currentStream) {\n        let track = yield _this._mediaService.getVideoTrack();\n        _this._videoTrackId = track.id;\n        _this._currentStream.addTrack(track);\n        _this.currentParticipant.videoEl.nativeElement.srcObject = _this._currentStream;\n      } else {\n        _this._onStopVideo();\n      }\n    })();\n  }\n  onSharingBtnClick() {}\n  onLeaveBtnClick() {}\n  static #_ = this.ɵfac = function InputControlsComponent_Factory(t) {\n    return new (t || InputControlsComponent)(i0.ɵɵdirectiveInject(i1.MediaService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: InputControlsComponent,\n    selectors: [[\"app-input-controls\"]],\n    inputs: {\n      currentParticipant: \"currentParticipant\"\n    },\n    decls: 17,\n    vars: 8,\n    consts: [[\"id\", \"controls-container\"], [\"id\", \"micro-button\", 1, \"input-button\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"height\", \"1em\", \"viewBox\", \"0 0 352 512\", 4, \"ngIf\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"height\", \"1em\", \"viewBox\", \"0 0 640 512\", 4, \"ngIf\"], [\"id\", \"video-button\", 1, \"input-button\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"height\", \"1em\", \"viewBox\", \"0 0 576 512\", 4, \"ngIf\"], [\"id\", \"share-screen-button\", 1, \"input-button\", \"input-btn-inactive\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"height\", \"1em\", \"viewBox\", \"0 0 640 512\"], [\"d\", \"M64 64V352H576V64H64zM0 64C0 28.7 28.7 0 64 0H576c35.3 0 64 28.7 64 64V352c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM128 448H512c17.7 0 32 14.3 32 32s-14.3 32-32 32H128c-17.7 0-32-14.3-32-32s14.3-32 32-32z\"], [\"id\", \"leave-button\", 1, \"input-button\", \"input-btn-active\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"height\", \"1em\", \"viewBox\", \"0 0 512 512\"], [\"d\", \"M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"height\", \"1em\", \"viewBox\", \"0 0 352 512\"], [\"d\", \"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z\"], [\"d\", \"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L472.1 344.7c15.2-26 23.9-56.3 23.9-88.7V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 21.2-5.1 41.1-14.2 58.7L416 300.8V96c0-53-43-96-96-96s-96 43-96 96v54.3L38.8 5.1zM344 430.4c20.4-2.8 39.7-9.1 57.3-18.2l-43.1-33.9C346.1 382 333.3 384 320 384c-70.7 0-128-57.3-128-128v-8.7L144.7 210c-.5 1.9-.7 3.9-.7 6v40c0 89.1 66.2 162.7 152 174.4V464H248c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H344V430.4z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"height\", \"1em\", \"viewBox\", \"0 0 576 512\"], [\"d\", \"M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128zM559.1 99.8c10.4 5.6 16.9 16.4 16.9 28.2V384c0 11.8-6.5 22.6-16.9 28.2s-23 5-32.9-1.6l-96-64L416 337.1V320 192 174.9l14.2-9.5 96-64c9.8-6.5 22.4-7.2 32.9-1.6z\"], [\"d\", \"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7l-86.4-67.7 13.8 9.2c9.8 6.5 22.4 7.2 32.9 1.6s16.9-16.4 16.9-28.2V128c0-11.8-6.5-22.6-16.9-28.2s-23-5-32.9 1.6l-96 64L448 174.9V192 320v5.8l-32-25.1V128c0-35.3-28.7-64-64-64H113.9L38.8 5.1zM407 416.7L32.3 121.5c-.2 2.1-.3 4.3-.3 6.5V384c0 35.3 28.7 64 64 64H352c23.4 0 43.9-12.6 55-31.3z\"]],\n    template: function InputControlsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵlistener(\"click\", function InputControlsComponent_Template_div_click_1_listener() {\n          return ctx.onMicroBtnClick();\n        });\n        i0.ɵɵtemplate(2, InputControlsComponent__svg_svg_2_Template, 4, 0, \"svg\", 2);\n        i0.ɵɵtemplate(3, InputControlsComponent__svg_svg_3_Template, 4, 0, \"svg\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵlistener(\"click\", function InputControlsComponent_Template_div_click_4_listener() {\n          return ctx.onVideoBtnClick();\n        });\n        i0.ɵɵtemplate(5, InputControlsComponent__svg_svg_5_Template, 4, 0, \"svg\", 5);\n        i0.ɵɵtemplate(6, InputControlsComponent__svg_svg_6_Template, 4, 0, \"svg\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵlistener(\"click\", function InputControlsComponent_Template_div_click_7_listener() {\n          return ctx.onSharingBtnClick();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(8, \"svg\", 7)(9, \"style\");\n        i0.ɵɵtext(10, \"svg{fill:#ffffff}\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"path\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(12, \"div\", 9);\n        i0.ɵɵlistener(\"click\", function InputControlsComponent_Template_div_click_12_listener() {\n          return ctx.onLeaveBtnClick();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(13, \"svg\", 10)(14, \"style\");\n        i0.ɵɵtext(15, \"svg{fill:#ffffff}\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"path\", 11);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassMap(ctx.isMicroActive ? \"input-btn-active\" : \"input-btn-inactive\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isMicroActive);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isMicroActive);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassMap(ctx.isVideoActive ? \"input-btn-active\" : \"input-btn-inactive\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isVideoActive);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isVideoActive);\n      }\n    },\n    dependencies: [i2.NgIf],\n    styles: [\"#controls-container[_ngcontent-%COMP%] {\\n  background-color: #434343;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  padding: 10px 30px;\\n  margin: 5px auto;\\n  border-radius: 5px;\\n  box-shadow: 0 0 5px #2d2d2d;\\n  gap: 10px;\\n  display: flex;\\n}\\n#controls-container[_ngcontent-%COMP%]   .input-btn-active[_ngcontent-%COMP%] {\\n  background-color: rgb(201, 0, 0);\\n}\\n#controls-container[_ngcontent-%COMP%]   .input-btn-inactive[_ngcontent-%COMP%] {\\n  background-color: rgb(104, 103, 103);\\n}\\n#controls-container[_ngcontent-%COMP%]   .input-button[_ngcontent-%COMP%] {\\n  width: 40px;\\n  height: 40px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  border-radius: 20px;\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvaW5wdXQtY29udHJvbHMvaW5wdXQtY29udHJvbHMuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi8uLi8lRDAlOUIlRDAlQjAlRDAlQjElRDAlQkElRDAlQjgvVmlkZW9DaGF0L2NsaWVudC9zcmMvYXBwL2lucHV0LWNvbnRyb2xzL2lucHV0LWNvbnRyb2xzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0kseUJBQUE7RUFDQSx1QkFBQTtFQUFBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0VBQ0EsMkJBQUE7RUFDQSxTQUFBO0VBQ0EsYUFBQTtBQ0NKO0FEQ0k7RUFDSSxnQ0FBQTtBQ0NSO0FERUk7RUFDSSxvQ0FBQTtBQ0FSO0FER0k7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0FDRFIiLCJzb3VyY2VzQ29udGVudCI6WyIjY29udHJvbHMtY29udGFpbmVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM0MzQzNDM7XHJcbiAgICB3aWR0aDogZml0LWNvbnRlbnQ7XHJcbiAgICBwYWRkaW5nOiAxMHB4IDMwcHg7XHJcbiAgICBtYXJnaW46IDVweCBhdXRvO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgYm94LXNoYWRvdzogMCAwIDVweCAjMmQyZDJkO1xyXG4gICAgZ2FwOiAxMHB4O1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuXHJcbiAgICAuaW5wdXQtYnRuLWFjdGl2ZSB7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIwMSwgMCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLmlucHV0LWJ0bi1pbmFjdGl2ZSB7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDEwNCwgMTAzLCAxMDMpO1xyXG4gICAgfVxyXG5cclxuICAgIC5pbnB1dC1idXR0b24ge1xyXG4gICAgICAgIHdpZHRoOiA0MHB4O1xyXG4gICAgICAgIGhlaWdodDogNDBweDtcclxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMjBweDtcclxuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICB9XHJcbn0iLCIjY29udHJvbHMtY29udGFpbmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzQzNDM0MztcbiAgd2lkdGg6IGZpdC1jb250ZW50O1xuICBwYWRkaW5nOiAxMHB4IDMwcHg7XG4gIG1hcmdpbjogNXB4IGF1dG87XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgYm94LXNoYWRvdzogMCAwIDVweCAjMmQyZDJkO1xuICBnYXA6IDEwcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG59XG4jY29udHJvbHMtY29udGFpbmVyIC5pbnB1dC1idG4tYWN0aXZlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIwMSwgMCwgMCk7XG59XG4jY29udHJvbHMtY29udGFpbmVyIC5pbnB1dC1idG4taW5hY3RpdmUge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTA0LCAxMDMsIDEwMyk7XG59XG4jY29udHJvbHMtY29udGFpbmVyIC5pbnB1dC1idXR0b24ge1xuICB3aWR0aDogNDBweDtcbiAgaGVpZ2h0OiA0MHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","InputControlsComponent","constructor","_mediaService","_onStopVideo","_currentStream","removeTrack","getTrackById","_videoTrackId","_onStopAudio","getAudioTracks","forEach","track","stop","onMicroBtnClick","isMicroActive","onVideoBtnClick","isVideoActive","getVideoStream","currentParticipant","videoEl","nativeElement","srcObject","getVideoTrack","id","addTrack","onSharingBtnClick","onLeaveBtnClick","selectors","inputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\Лабки\\VideoChat\\client\\src\\app\\input-controls\\input-controls.component.html","D:\\Лабки\\VideoChat\\client\\src\\app\\input-controls\\input-controls.component.ts"],"sourcesContent":["<div id=\"controls-container\">\n    <div id=\"micro-button\" class=\"input-button\" [class]=\"isMicroActive ? 'input-btn-active' : 'input-btn-inactive'\" (click)=\"onMicroBtnClick()\">\n        <svg *ngIf=\"isMicroActive\" xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 352 512\"><style>svg{fill:#ffffff}</style><path d=\"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z\"/></svg>\n        <svg *ngIf=\"!isMicroActive\" xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 640 512\"><style>svg{fill:#ffffff}</style><path d=\"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L472.1 344.7c15.2-26 23.9-56.3 23.9-88.7V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 21.2-5.1 41.1-14.2 58.7L416 300.8V96c0-53-43-96-96-96s-96 43-96 96v54.3L38.8 5.1zM344 430.4c20.4-2.8 39.7-9.1 57.3-18.2l-43.1-33.9C346.1 382 333.3 384 320 384c-70.7 0-128-57.3-128-128v-8.7L144.7 210c-.5 1.9-.7 3.9-.7 6v40c0 89.1 66.2 162.7 152 174.4V464H248c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H344V430.4z\"/></svg>\n    </div>\n    <div id=\"video-button\" class=\"input-button\" [class]=\"isVideoActive ? 'input-btn-active' : 'input-btn-inactive'\" (click)=\"onVideoBtnClick()\">\n        <svg *ngIf=\"isVideoActive\" xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 576 512\"><style>svg{fill:#ffffff}</style><path d=\"M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128zM559.1 99.8c10.4 5.6 16.9 16.4 16.9 28.2V384c0 11.8-6.5 22.6-16.9 28.2s-23 5-32.9-1.6l-96-64L416 337.1V320 192 174.9l14.2-9.5 96-64c9.8-6.5 22.4-7.2 32.9-1.6z\"/></svg>\n        <svg *ngIf=\"!isVideoActive\" xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 640 512\"><style>svg{fill:#ffffff}</style><path d=\"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7l-86.4-67.7 13.8 9.2c9.8 6.5 22.4 7.2 32.9 1.6s16.9-16.4 16.9-28.2V128c0-11.8-6.5-22.6-16.9-28.2s-23-5-32.9 1.6l-96 64L448 174.9V192 320v5.8l-32-25.1V128c0-35.3-28.7-64-64-64H113.9L38.8 5.1zM407 416.7L32.3 121.5c-.2 2.1-.3 4.3-.3 6.5V384c0 35.3 28.7 64 64 64H352c23.4 0 43.9-12.6 55-31.3z\"/></svg>\n    </div>\n    <div id=\"share-screen-button\" class=\"input-button input-btn-inactive\" (click)=\"onSharingBtnClick()\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 640 512\"><style>svg{fill:#ffffff}</style><path d=\"M64 64V352H576V64H64zM0 64C0 28.7 28.7 0 64 0H576c35.3 0 64 28.7 64 64V352c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM128 448H512c17.7 0 32 14.3 32 32s-14.3 32-32 32H128c-17.7 0-32-14.3-32-32s14.3-32 32-32z\"/></svg>\n    </div>\n    <div id=\"leave-button\" class=\"input-button input-btn-active\" (click)=\"onLeaveBtnClick()\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 512 512\"><style>svg{fill:#ffffff}</style><path d=\"M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z\"/></svg>\n    </div>\n</div>","import { Component, Input } from '@angular/core';\nimport { MediaService } from 'src/service/media.service';\nimport { ParticipantComponent } from '../participant/participant.component';\n\n@Component({\n  selector: 'app-input-controls',\n  templateUrl: './input-controls.component.html',\n  styleUrls: ['./input-controls.component.scss']\n})\nexport class InputControlsComponent {\n  private _currentStream?: MediaStream;\n  private _videoTrackId?: string;\n\n  public isMicroActive = false;\n  public isVideoActive = false;\n  public isSharingActive = false;\n  @Input() public currentParticipant! : ParticipantComponent; \n\n  constructor(private readonly _mediaService: MediaService) {}\n\n  private _onStopVideo() {\n    this._currentStream!.removeTrack(this._currentStream!.getTrackById(this._videoTrackId!)!);\n  }\n\n  private _onStopAudio() {\n    this._currentStream!.getAudioTracks().forEach((track) => track.stop());\n  }\n\n  public onMicroBtnClick() {\n    this.isMicroActive = !this.isMicroActive;\n    if (this.isMicroActive) {\n      \n    }\n  }\n\n  public async onVideoBtnClick() {\n    this.isVideoActive = !this.isVideoActive;\n    if (this.isVideoActive && !this._currentStream) {\n      this._currentStream = await this._mediaService.getVideoStream();\n      this.currentParticipant.videoEl.nativeElement.srcObject = this._currentStream;\n    } else if (this.isVideoActive && this._currentStream) {\n      let track = await this._mediaService.getVideoTrack();\n      this._videoTrackId = track.id;\n      this._currentStream.addTrack(track);\n      this.currentParticipant.videoEl.nativeElement.srcObject = this._currentStream;\n    } else {\n      this._onStopVideo();\n    }\n  }\n\n  public onSharingBtnClick() {\n\n  }\n\n  public onLeaveBtnClick() {\n    \n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}